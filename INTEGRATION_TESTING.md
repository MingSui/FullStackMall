# 集成测试实施计划

## 测试范围

### 1. 端到端用户流程测试
- 用户注册 → 登录 → 浏览商品 → 添加购物车 → 下单 → 查看订单
- 用户登录 → 修改购物车 → 结算订单
- 管理员登录 → 商品管理 → 订单管理

### 2. API集成测试
- 认证API测试
- 商品管理API测试  
- 购物车API测试
- 订单API测试
- 错误处理测试

### 3. 数据库集成测试
- 数据一致性验证
- 事务完整性测试
- 并发操作测试

## 测试环境配置

### 前置条件
1. MySQL数据库运行正常
2. 后端服务启动 (端口8080)
3. 前端服务启动 (端口5173)
4. 测试数据已初始化

### 环境变量
```bash
# 后端环境变量
SPRING_DATASOURCE_URL=jdbc:mysql://localhost:3306/fullstackmall_test
SPRING_DATASOURCE_USERNAME=root
SPRING_DATASOURCE_PASSWORD=rootpassword

# 前端环境变量
VITE_API_BASE_URL=http://localhost:8080/api
```

## 测试用例

### 场景1: 新用户完整购物流程
**测试步骤:**
1. 访问首页 → 点击注册
2. 填写注册信息 → 提交注册
3. 自动登录 → 浏览商品列表
4. 搜索商品 → 查看商品详情
5. 添加商品到购物车 → 查看购物车
6. 修改商品数量 → 填写收货地址
7. 提交订单 → 查看订单详情
8. 个人中心查看订单历史

**预期结果:**
- 每个步骤都能正常完成
- 数据在各个页面之间正确传递
- 订单状态正确更新
- 库存正确扣减

### 场景2: 购物车管理流程
**测试步骤:**
1. 用户登录
2. 添加多个商品到购物车
3. 修改商品数量
4. 删除部分商品
5. 清空购物车
6. 重新添加商品并下单

**预期结果:**
- 购物车数据实时更新
- 价格计算准确
- 库存检查正确
- 数据持久化正常

### 场景3: 并发操作测试
**测试步骤:**
1. 模拟多用户同时购买同一商品
2. 模拟用户同时修改购物车
3. 模拟管理员同时管理商品库存

**预期结果:**
- 数据一致性保持
- 库存不会超卖
- 没有死锁或竞态条件

## 测试工具和框架

### 自动化测试工具
- **API测试**: Postman/Newman
- **端到端测试**: Cypress
- **性能测试**: JMeter
- **数据库测试**: TestContainers

### 测试数据管理
- 测试前清理数据
- 使用固定测试数据集
- 测试后数据恢复

## 测试执行

### 自动化测试执行
```bash
# 后端API测试
./test-api.sh

# 前端单元测试
cd frontend && npm test

# 后端单元测试
cd backend && mvn test

# 集成测试
cd frontend && npm run test:e2e
```

### 手动测试检查清单

#### 用户认证模块
- [ ] 用户注册功能正常
- [ ] 邮箱/用户名重复检查
- [ ] 用户登录功能正常
- [ ] 密码错误处理
- [ ] JWT token正确生成和验证
- [ ] 登出功能正常

#### 商品管理模块
- [ ] 商品列表显示正常
- [ ] 商品搜索功能正常
- [ ] 商品分类筛选
- [ ] 商品详情页面
- [ ] 分页功能正常
- [ ] 商品图片加载

#### 购物车模块
- [ ] 添加商品到购物车
- [ ] 修改商品数量
- [ ] 删除购物车商品
- [ ] 购物车总价计算
- [ ] 清空购物车
- [ ] 库存检查

#### 订单模块
- [ ] 订单创建功能
- [ ] 订单状态管理
- [ ] 订单历史查看
- [ ] 订单取消功能
- [ ] 收货地址管理
- [ ] 库存扣减

#### 用户界面
- [ ] 响应式设计正常
- [ ] 页面加载速度合理
- [ ] 错误信息显示友好
- [ ] 成功操作反馈
- [ ] 导航功能正常

## 性能基准

### 响应时间要求
- API响应时间 < 2秒
- 页面加载时间 < 3秒
- 数据库查询时间 < 1秒

### 并发用户数
- 支持100个并发用户
- 购物车操作支持50个并发
- 订单创建支持20个并发

## 测试报告

### 测试结果记录
- 测试用例执行状态
- 发现的缺陷列表
- 性能测试数据
- 兼容性测试结果

### 缺陷管理
- 缺陷分类和优先级
- 缺陷修复状态跟踪
- 回归测试结果

## 测试完成标准

### 功能性标准
- 所有核心功能正常工作
- 所有用户流程可以完整执行
- API接口返回正确数据
- 错误处理机制完善

### 性能标准
- 满足性能基准要求
- 无内存泄漏
- 数据库查询优化
- 前端资源加载优化

### 安全性标准
- JWT认证机制正常
- 数据输入验证有效
- SQL注入防护
- XSS攻击防护

## 风险评估

### 高风险项
- 数据库连接稳定性
- 并发操作数据一致性
- 第三方依赖可用性

### 缓解策略
- 数据库连接池配置
- 事务隔离级别设置
- 错误重试机制
- 降级方案准备